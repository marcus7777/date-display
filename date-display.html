<link rel="import" href="../moment-js/moment-js.html">
<link rel="import" href="../polymer/polymer.html">
<!--
  `<date-display></date-display>` display date
  @demo demo.html
-->
<dom-module id="date-display">
  <template>
    {{date}}
  </template>
</dom-module>
<script>
  Polymer({
    is: "date-display",
    properties:{
      format:{
        type:String,
        value:"LL",
      },
      date:{
        computed:"getDate(format,locale,value)",
      },
      locale:{
        type:String,
        value:"en-gb",
      },
      value: {
        type:Number,
        value: 0,
      }
    },
    getDate: function(format,locale,value){
      if (value) {
        var a = moment(value).locale(locale)
        var b = moment(0)
        if (value < (60 * 1000)) {
          return (Math.round(10 * a.diff(b, "seconds", true)) / 10) + " seconds"
        } else if (value < (60 * 1000)) {
          var minute = a.diff(b, "minutes")
          var second = a.diff(b.add(minute, "minutes"), "seconds")
          return  minute + ":" + second
        } else if (value < (24 * 60 * 60 * 1000)) {
          var hour   = a.diff(b, "hours")
          var minute = a.diff(b.add(hour, "hours"), "minutes")
          var second = a.diff(b.add(hour, "hours").add(minute, "minutes"), "seconds")
          return hour + ":" + minute + ":" + second
        } else {
          var c = moment(value).locale(locale)
          return c.format(format)
        }
      } else {
        var d = moment().locale(locale)
        return d.format(format)
      }
    },
  })
</script>
